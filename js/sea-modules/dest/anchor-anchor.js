define(function(d,b,e){var a=d("cons");var f=d("./anchor-list");var c=d("./anchor-tools");e.exports={anchors:{},init:function(){$("#addFav2").on("click",function(){if(!UIF.handler.login){UIF.handler.loging();return}var g=UIF.handler.cache.get(a.USER_HEADINFOS);if(g!=null&&g.isFollows==1){c.dialog("\u53D6\u6D88\u5173\u6CE8\u5C06\u6E05\u9664\u4EB2\u5BC6\u7B49\u7EA7\uFF01",function(h){UIF.handler.follow({},function(i){i=jQuery.parseJSON(i);if(i.resultStatus!=200){return}if(i.isFollows==0){$("#isfollow1").show().siblings("#isfollow0").hide()}})},function(h){})}else{UIF.handler.follow({},function(h){h=jQuery.parseJSON(h);if(h.resultStatus!=200){return}if(h.isFollows==1){$("#isfollow0").show().siblings("#isfollow1").hide()}})}})},onMessage:function(g){this.anchors=g;this.onLoad()},onLoad:function(){this.onHeads();if("qqgame_built"!=UIF.skinType){this.menus();this.startMenu()}},startMenu:function(){$(".guard-area").draggable({containment:"parent",stop:function(){var g=$(".guard-area").attr("style");UIF.setCookie("guard-area",g,60*24*60)}});$(".guard-area").resizable({alsoResize:".guard-main",minHeight:150,minWidth:208,stop:function(){var g=$(".guard-area").attr("style");UIF.setCookie("guard-area",g,60*24*60)}});$(".rank-area").draggable({containment:"parent",stop:function(){var g=$(".rank-area").attr("style");UIF.setCookie("rank-area",g,60*24*60)}});$(".rank-area").resizable({alsoResize:".rk-con1,.rk-con2,.rk-con3",minHeight:150,minWidth:208,stop:function(){var g=$(".rank-area").attr("style");UIF.setCookie("rank-area",g,60*24*60)}});$(".gift-record").draggable({containment:"parent",cancel:"#span",stop:function(){var g=$(".gift-record").attr("style");UIF.setCookie("gift-record",g,60*24*60)}});$(".gift-record").resizable({alsoResize:".gr-main",minHeight:150,minWidth:208,stop:function(){var g=$(".gift-record").attr("style");UIF.setCookie("gift-record",g,60*24*60)}});$(".visitant-record").draggable({containment:"parent",cancel:"#span",stop:function(){var g=$(".visitant-record").attr("style");UIF.setCookie("visitant-record",g,60*24*60)}});$(".visitant-record").resizable({alsoResize:".vr-main",minHeight:150,minWidth:208,stop:function(){var g=$(".visitant-record").attr("style");UIF.setCookie("visitant-record",g,60*24*60)}});$(".chat-area").draggable({containment:"parent",cancel:".hrr,input",stop:function(){var g=$(".chat-area").attr("style");UIF.setCookie("chat-area",g,60*24*60)}});$(".chat-area").resizable({alsoResize:".cr-body,#msgContent",minHeight:530,minWidth:340,stop:function(){var g=$(".chat-area").attr("style");UIF.setCookie("chat-area",g,60*24*60)}});$(".chat-area").on("resizestop",function(g,h){$("#nano-pubChatList").nanoScroller();$("#nano-pubChatList").nanoScroller({scroll:"bottom"})})},menus:function(){var l=this;var k=d("map");var g=new k();g.put("sw-guard","guard-area");g.put("sw-chat","chat-area");g.put("sw-record","gift-record");g.put("sw-rank","rank-area");g.put("sw-vip","visitant-record");for(var j=0;j<g.size();j++){var n=g.elements[j];if(n!=null){l.swc(n.key,n.value);var h=c.getCookie(n.key+"-cook");var m=c.getCookie(n.value);if(m!=null){$("."+n.value).attr("style",m)}if(h!=null&&h==1){$("#"+n.key).removeClass(n.key).addClass(n.key+"-hover");$("."+n.value).hide()}else{$("."+n.value).show()}}}},swc:function(h,g){$(".switch-area").on("click","#"+h+"",function(){if(!UIF.handler.login){UIF.handler.loging();return}c.setCookie(h+"-cook",1,60*24*60);$("."+g+"").toggle();if($("."+g+"").is(":hidden")){$(this).addClass(h+"-hover").removeClass(h)}else{c.setCookie(h+"-cook",0,60*24*60);$(this).addClass(h).removeClass(h+"-hover")}})},onHeads:function(){if(this.anchors!=null&&this.anchors.followNumber!=null){$(".live-info .self-level .level-margin-area .l-xin").text(this.anchors.followNumber)}if(this.anchors!=null&&this.anchors.heatNumber!=null){$(".live-info .self-level .level-margin-area .l-fire").text(this.anchors.heatNumber)}if(this.anchors!=null&&this.anchors.numbers!=null){$(".live-info .s-else .s-people").text(this.anchors.numbers)}if(this.anchors!=null&&this.anchors.city!=null){$(".live-info .self-name .s-else .s-position").text(this.anchors.city)}if(this.anchors!=null&&this.anchors.nickname!=null){$(".live-info .self-name .anchor-info-names").text(decodeURIComponent(this.anchors.nickname))}if(this.anchors!=null&&this.anchors.dc!=null){$(".lhaicha").text("\u5347\u7EA7\u8FD8\u5DEE"+this.anchors.dc+"\u7ECF\u9A8C\u503C")}if(this.anchors!=null&&this.anchors.nc!=null){$(".lvinner").css("width",this.anchors.nc+"%")}$(".toggleBox .viewer>span").text(this.anchors.numbers);$(".s-name .anchor-level").removeClass().addClass("anchor-level").addClass(this.anchors.il);$(".lhaicha").siblings("span").removeClass().addClass("anchor-level-next").addClass("anchor-level").addClass(this.anchors.inl);UIF.handler.cache.remove(a.ANCHOR_HEADINFOS);UIF.handler.cache.put(a.ANCHOR_HEADINFOS,this.anchors);if(this.anchors!=null&&this.anchors.userList!=null&&this.anchors.userList.length>0){var g=this.anchors.userList;for(var j=0;j<g.length;j++){var h=g[j];f.addUsers(h)}}}}});