define(function(c,a,d){c("jquery");var b=c("./anchor-tools");d.exports={mo:function(){$(".live-video #video").html(this.bg());$(".live-video #video #bglis").append(this.childBg());$(".live-video #video .no-live-text").text("正在加载中")},stat:function(e){if(UIF.handler.anchorId!=UIF.handler.userId){if(e!=null&&e.online!=null&&e.online){$(".live-video #video").html(this.player())}else{$(".live-video #video").html(this.bg());$(".live-video #video #bglis").append(this.childBg());$(".live-video #video .no-live-text").text("主播已下播")}}},init:function(e){var f=e.data;if(f.anchors&&f.status==200&&UIF.handler.anchorId==UIF.handler.userId){$(".live-video #video").html(this.record())}else{if(f.online&&f.status==200&&UIF.handler.anchorId!=UIF.handler.userId){$(".live-video #video").html(this.player())}else{$(".live-video #video").html(this.bg());$(".live-video #video #bglis").append(this.childBg());if(f.messag=="success"){f.messag="主播未开播"}$(".live-video #video .no-live-text").text(f.messag)}}},record:function(){var g=new Array;var f=UIF.handler.token;var h=UIF.handler.flash;var e=UIF.handler.roomNumber;g.push(' <div class="flash-area">');g.push('<div id="mwin1">');g.push(" <!--<![endif]-->");g.push('<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="player" name="player" align="middle">');g.push('<param name="movie" value="/js/sea-modules/swf/record.swf?'+UIF.version+'">');g.push('<param name="flashvars" value="chat=1&amp;usernumber='+e+"&amp;roomnumber="+e+"&amp;c="+f+"&amp;mtadd="+h+'">');g.push('<param name="quality" value="high">');g.push('<param name="wmode" value="transparent">');g.push('<param name="allowScriptAccess" value="always">');g.push('<param name="allowfullscreen" value="true">');g.push("<!--[if !IE]>-->");g.push('<object type="application/x-shockwave-flash" data="/js/sea-modules/swf/record.swf?'+UIF.version+'" id="player" name="player">');g.push('<param name="movie" value="/js/sea-modules/swf/record.swf?'+UIF.version+'">');g.push('<param name="flashvars" value="chat=1&amp;usernumber='+userId+"&amp;roomnumber="+e+"&amp;c="+f+"&amp;mtadd="+h+'">');g.push('<param name="quality" value="high">');g.push('<param name="wmode" value="transparent">');g.push('<param name="allowScriptAccess" value="always">');g.push('<param name="allowfullscreen" value="true">');g.push("<!--<![endif]-->");g.push('<a href="http://www.adobe.com/go/getflash">');g.push('<img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player">');g.push("</a>");g.push("<!--[if !IE]>-->");g.push("</object>");g.push("<!--<![endif]-->");g.push("</object>");g.push("</div>");g.push("</div>");return g.join("")},player:function(){var f=new Array;var g=UIF.handler.flash;var e=UIF.handler.roomNumber;f.push(' <div class="flash-area">');f.push('<div id="mwin1">');f.push(" <!--<![endif]-->");f.push('<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"  id="player" name="player" align="middle">');f.push('<param name="movie" value="/js/sea-modules/swf/player.swf?'+UIF.version+'">');f.push('<param name="flashvars" value="token=&amp;chat=1&amp;roomnumber='+e+"&amp;fn="+e+"&amp;mtadd="+g+'">');f.push('<param name="quality" value="high">');f.push('<param name="wmode" value="transparent">');f.push('<param name="allowScriptAccess" value="always">');f.push('<param name="allowfullscreen" value="true">');f.push("<!--[if !IE]>-->");f.push('<object type="application/x-shockwave-flash" data="/js/sea-modules/swf/player.swf?'+UIF.version+'" id="player" name="player">');f.push('<param name="movie" value="/js/sea-modules/swf/player.swf?'+UIF.version+'">');f.push('<param name="flashvars" value="token=&amp;chat=1&amp;roomnumber='+e+"&amp;fn="+e+"&amp;mtadd="+g+'">');f.push('<param name="quality" value="high">');f.push('<param name="wmode" value="transparent">');f.push('<param name="allowScriptAccess" value="always">');f.push('<param name="allowfullscreen" value="true">');f.push("<!--<![endif]-->");f.push('<a href="http://www.adobe.com/go/getflash">');f.push('<img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player">');f.push("</a>");f.push("<!--[if !IE]>-->");f.push("</object>");f.push("<!--<![endif]-->");f.push("</object>");f.push("</div>");f.push("</div>");return f.join("")},bg:function(){var e=new Array;e.push('<div class="no-live">');e.push('<div class="no-live-text">主播未开播</div>');e.push('<div class="no-live-next">下次开播时间：<span class="no-live-week">星期五</span>&nbsp;&nbsp;&nbsp;<span class="no-live-time">19:20</span></div>');e.push('<ul id="bglis">');e.push("</ul>");e.push("</div>");return e.join("")},childBg:function(){var f=new Array;f.push("<li>");f.push('<a href="{0}"></a>');f.push('<div class="noanchor-kuang">');f.push('<div class="nocnchor-k bk-color"></div>');f.push('<img src="{1}" alt="{2}">');f.push("</div>");f.push('<div class="noanchor-info">');f.push('<div class="noanchor-level anchor-level {3}"></div>');f.push('<div class="noanchor-name">{4}</div>');f.push('<div class="clear"></div>');f.push('<div class="noanchor-num">{5}</div>');f.push("</div>");f.push("</li>");var e=new Array;$.ajax({type:"post",url:"/rest/site/ats.mt",data:"roomNumber="+UIF.handler.roomNumber,async:false,success:function(g){if(g.resultStatus==200&&g.data!=null){g.data.forEach(function(j){var h=f.join("");var i=b.stringFormat("{0} 在线",j.numbers);if(j.numbers==0){i=" 离线"}var k=b.stringFormat(h,j.roomNumber,j.image,decodeURIComponent(j.nickName),j.levelImg,decodeURIComponent(j.nickName),i);e.push(k)})}}});$.ajax({type:"post",url:"/rest/site/atsTime.mt",data:"roomNumber="+UIF.handler.roomNumber,async:false,success:function(g){if(g.resultStatus==200&&g.data!=null){$(".no-live-week").text(g.data[0]);$(".no-live-time").text(g.data[1]);$(".no-live-next").show()}}});return e.join("")}}});